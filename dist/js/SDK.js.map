{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/utils.js","webpack:///./js/sdk/geometry/vector.js","webpack:///./js/sdk/geometry/rectangle.js","webpack:///./js/sdk/input/keyboard/Keyboard.js","webpack:///./js/sdk/input/touch/touchManager.js","webpack:///./js/sdk/sound/soundManager.js","webpack:///./js/sdk/sound/sound.js","webpack:///./js/sdk/camera.js","webpack:///./js/sdk/gameTimer.js","webpack:///./js/sdk/geometry/segment.js","webpack:///./js/sdk/tile.js","webpack:///./js/sdk/SDK.js","webpack:///../node_modules/webpack/buildin/global.js","webpack:///./js/sdk/Game.js","webpack:///./js/sdk/input/keyboard/Key.js","webpack:///./js/sdk/input/keyboard/keyCodes.js","webpack:///./js/sdk/geometry/circle.js","webpack:///./js/sdk/grid.js","webpack:///./js/sdk/input/index.js","webpack:///./js/sdk/input/mouse/Mouse.js","webpack:///./js/sdk/input/mouse/mouseManager.js","webpack:///./js/sdk/particle.js","webpack:///./js/sdk/physics.js","webpack:///./js/sdk/tilemap.js"],"names":["enumerable","get","getter","value","key","bind","module","Object","prototype","hasOwnProperty","call","object","property","id","exports","toFixedPrecision","number","precision","toFixed","noop","randInt","start","end","Math","floor","random","lerp","v0","v1","t","show","el","classList","remove","hide","add","incrementID","render","vdom","renderNode","vnode","document","createTextNode","element","createElement","type","props","keys","forEach","setAttribute","eventType","substring","addEventListener","children","childNode","undefined","appendChild","h","vNode","arguments","Array","slice","length","reduce","acc","item","isArray","concat","emptyElement","firstChild","removeChild","Vector","x","y","this","sum","i","subtract","v2","determinant","dotProduct","scale","a","getUnitVector","normSquared","norm","getNormalVector","rotateRadians","angle","cos","sin","defineProperties","direction","atan2","set","pow","sqrt","newNorm","Rectangle","width","height","left","top","bottom","right","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","center","minkowskiDifference","r1","r2","inflate","dx","dy","resize","getBoundingRect","within","r","overlaps","contains","containsStrict","Key","keyCodes","Keyboard","game","handleKeyup","handleKeydown","preventDefault","keyCode","assign","bindEventHandlers","event","code","isEnabled","returnValue","isPressed","pressStart","timestamp","shiftKey","ctrlKey","altKey","metaKey","repeat","onDown","pressEnd","pressDuration","onUp","window","unbindEventHandlers","removeEventListener","disable","enable","modes","SPRING_IN","SPRING_OUT","STATIC","TouchManager","JOYPAD_THRESHOLD_X","JOYPAD_THRESHOLD_Y","joypadMode","joypadOuter","getElementById","joypad","joypadWidth","parseInt","getComputedStyle","joypadHeight","handleJoypadTouch","handleJoypadTouchEnd","buttonLeft","buttonRight","buttonA","buttonB","BUTTON_LEFT","BUTTON_RIGHT","BUTTON_A","BUTTON_B","style","transition","joypadOuterRect","getBoundingClientRect","joypadOriginX","joypadOriginY","eventTouch","touches","touch","target","deltaX","clientX","deltaY","clientY","maxDeltaX","maxDeltaY","JOYPAD_LEFT","JOYPAD_RIGHT","min","abs","max","JOYPAD_UP","JOYPAD_DOWN","console","log","Sound","SoundManager","gameData","masterVolume","sounds","musics","pausedSounds","location","soundData","musicData","files","file","filename","sound","volume","stopAll","stop","pauseAll","isPlaying","push","pause","playPaused","pausedSound","play","src","options","loop","isMusic","Audio","rewind","currentTime","replay","AXIS","NONE","HORIZONTAL","VERTICAL","BOTH","Camera","zoomLevel","canvas","worldRect","zoomingRate","xDeadZone","yDeadZone","axis","followed","shouldStayWithinWorldBounds","create","constructor","follow","gameObject","update","updateDimensions","zoomIn","centerX","centerY","zoomOut","applyToX","round","applyToY","apply","applyToDistance","distance","unapplyToX","unapplyToY","unapply","unapplyToDistance","utils","GameTimer","dt","previousTime","Date","now","totalTime","reset","Segment","A","B","isOrthogonalProjectedPointOnSegment","P","AB","AP","BP","getOrthogonalProjectionOfPoint","u","AH","getDistanceFromPoint","getDistanceFromPointToLine","n","getClosestPointOnSegment","normAB","getPointOfIntersectionWithCircle","c","C","H","CH","Tile","size","image","Image","draw","ctx","camera","save","drawImage","restore","Game","Circle","Grid","Input","MouseManager","Particle","physics","Tilemap","SDK","global","g","Function","e","getContext","keyboard","touchInput","soundManager","timer","step","frame","requestAnimationFrame","diameter","area","PI","moveTo","containsPoint","mouse","cursorSize","cursorColor","innerGridSize","precisionAreaSize","precisionGridSize","isPrecisionAreaRound","getMousePosSnappedToGrid","mouseX","mouseY","mouseGamePos","snappedMouseGamePos","getMouseGamePosSnappedToGrid","mousePosSnappedToGrid","_drawRulers","minX","maxX","ceil","minY","maxY","font","fillStyle","colors","STAR_WARS_YELLOW","strokeStyle","beginPath","lineTo","stroke","fillText","textAlign","_drawInnerGrid","j","_drawPrecisionArea","mousePos","precisionAreaGameSize","_drawCursor","lineWidth","_displayCoordinates","displayRulers","isGame","Mouse","Touch","app","naturalScrolling","buttons","0","1","2","wheel","clickX","clickY","releaseX","releaseY","grabbed","grabbedStartingX","grabbedStartingY","offsetLeft","offsetTop","button","cursor","scrollDirection","mouseGamePosSnappedToGrid","grid","on","callback","off","circle","color","v","vx","vy","createdAt","maxLife","destroy","particles","arc","rect","fill","collision","RectangleWithRectangle","circleWithSegment","s","lineSegmentCollision","O","AO","segmentWithSegment","OP","numerator","denominator","k","segmentRectangle","box","side","points","rayFraction","sides","edge","newRayFraction","TileMap","rows","columns","tileSize","data","tiles","row","column","tileData","tile"],"mappings":"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nE,KAAKiE,UAAW,EAChBjE,KAAKoE,SAAU,EAGfpE,KAAK8D,WAAY,EAGjB9D,KAAK+D,WAGL/D,KAAKuE,SAGLvE,KAAKwE,cAGLxE,KAAK4D,WAAY,EAGjB5D,KAAKsE,OAAS,aAGdtE,KAAKyE,KAAO,e,cC4Ed7I,EAAOQ,QApHQ,CAEb,SACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MACA,MACA,MAEA,YACA,aACA,cACA,eACA,WACA,YACA,UACA,WAEA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,cACA,eACA,YACA,QACA,YACA,QACA,SACA,QACA,gBACA,cACA,WACA,QACA,QACA,MACA,YAEA,YACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,QACA,QAEA,cACA,aACA,QACA,SACA,OACA,SACA,SACA,MACA,WACA,UACA,YACA,YACA,aAEA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YACA,iBACA,gBACA,cACA,eACA,cACA,cACA,mB,gBCjHF,IAAIoF,EAAY,EAAQ,GACpB3B,EAAS,EAAQ,GAQrB,SAAS+O,EAAO9O,EAAGC,EAAG6C,GACpB5C,KAAKF,EAAIA,GAAK,EACdE,KAAKD,EAAIA,GAAK,EACdC,KAAK4C,EAAIA,GAAK,EAGhB/G,OAAOoF,iBAAiB2N,EAAO9S,UAAW,CACxCkU,SAAU,CACRzU,IAAK,WACH,OAAgB,EAATyE,KAAK4C,IAGhBV,OAAQ,CACN3G,IAAK,WACH,OAAO,IAAIsE,EAAOG,KAAKF,EAAGE,KAAKD,KAGnCkQ,KAAM,CACJ1U,IAAK,WACH,OAAOsB,KAAKqT,GAAKlQ,KAAK4C,EAAI5C,KAAK4C,IAGnCjB,KAAM,CACJpG,IAAK,WACH,OAAOyE,KAAKF,EAAIE,KAAK4C,IAGzBd,MAAO,CACLvG,IAAK,WACH,OAAOyE,KAAKF,EAAIE,KAAK4C,I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","file":"SDK.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 23);\n","module.exports = {\n  toFixedPrecision: function(number, precision) {\n    return +number.toFixed(precision || 0);\n  },\n\n  noop: function() {},\n\n  randInt: function(start, end) {\n    return Math.floor(Math.random() * (end - start + 1) + start);\n  },\n\n  lerp: function(v0, v1, t) {\n    return (1 - t) * v0 + t * v1;\n  },\n\n  show: function(el) {\n    el.classList.remove(\"hidden\");\n  },\n\n  hide: function(el) {\n    el.classList.add(\"hidden\");\n  },\n\n  incrementID: (function() {\n    var id = -1;\n    return function() {\n      id = id + 1;\n      return id;\n    };\n  })(),\n\n  // h: function(type, props, children) {\n  //   var el = document.createElement(type);\n  //   var nodes, node;\n  //   for (var key in props) {\n  //     el.setAttribute(key, props[key]);\n  //   }\n  //   if (Array.isArray(children)) {\n  //     nodes = children;\n  //   } else {\n  //     nodes = [children];\n  //   }\n  //   for (var i = 0; i < nodes.length; i++) {\n  //     if (typeof nodes[i] === \"string\") {\n  //       node = document.createTextNode(nodes[i]);\n  //     } else {\n  //       node = nodes[i];\n  //     }\n  //     el.appendChild(node);\n  //   }\n  //   return el;\n  // },\n\n  render: function(vdom) {\n    return (function renderNode(vnode) {\n      // vnode is a string\n      if (typeof vnode === \"string\" || typeof vnode === \"number\")\n        return document.createTextNode(vnode);\n\n      var element = document.createElement(vnode.type);\n      var props = vnode.props || {};\n\n      Object.keys(props).forEach(function(key) {\n        // treat events separately\n        if (typeof props[key] !== \"function\") {\n          element.setAttribute(key, props[key]);\n        }\n\n        // events\n        if (typeof props[key] === \"function\") {\n          var eventType = key.substring(2); // remove the 'on' part\n          element.addEventListener(eventType, props[key]);\n        }\n      });\n\n      (vnode.children || []).forEach(function(childNode) {\n        if (childNode === undefined) return;\n        return element.appendChild(renderNode(childNode));\n      });\n      return element;\n    })(vdom);\n  },\n\n  h: function() {\n    var vNode = {};\n    var type = arguments[0];\n    var props = arguments[1];\n    var children = Array.prototype.slice.call(arguments, 2);\n\n    vNode.type = type;\n    vNode.props = props;\n    if (children.length) {\n      vNode.children = children.reduce(function(acc, item) {\n        return Array.isArray(item) ? acc.concat(item) : acc.concat(item);\n      }, []);\n    } else {\n      vNode.children = null;\n    }\n\n    return vNode;\n  },\n\n  emptyElement: function(el) {\n    while (el.firstChild) {\n      el.removeChild(el.firstChild);\n    }\n  }\n};\n","function Vector(x, y) {\n  this.x = x || 0;\n  this.y = y || 0;\n}\n\n// public static methods\nVector.sum = function() {\n  var x = 0,\n    y = 0;\n  for (var i = 0; i < arguments.length; i++) {\n    x += arguments[i].x;\n    y += arguments[i].y;\n  }\n  return new Vector(x, y);\n};\n\nVector.subtract = function(v1, v2) {\n  return new Vector(v1.x - v2.x, v1.y - v2.y);\n};\n\nVector.determinant = function(v1, v2) {\n  return v1.x * v2.y - v1.y * v2.x;\n};\n\nVector.dotProduct = function(v1, v2) {\n  return v1.x * v2.x + v1.y * v2.y;\n};\n\n// public non static methods\nVector.prototype.scale = function(a) {\n  return new Vector(this.x * a, this.y * a);\n};\n\nVector.prototype.getUnitVector = function() {\n  if (this.normSquared === 0) {\n    return new Vector();\n  } else {\n    return new Vector(this.x, this.y).scale(1 / this.norm);\n  }\n};\n\nVector.prototype.getNormalVector = function() {\n  return new Vector(-this.y, this.x);\n};\n\nVector.prototype.rotateRadians = function(angle) {\n  return new Vector(\n    Math.cos(angle) * this.x - Math.sin(angle) * this.y,\n    Math.sin(angle) * this.x + Math.cos(angle) * this.y\n  );\n};\n\nObject.defineProperties(Vector.prototype, {\n  direction: {\n    get: function() {\n      return Math.atan2(this.y, this.x);\n    },\n    set: function(direction) {\n      var norm = this.norm;\n      this.x = norm * Math.cos(direction);\n      this.y = norm * Math.sin(direction);\n    }\n  },\n  normSquared: {\n    get: function() {\n      return Math.pow(this.x, 2) + Math.pow(this.y, 2);\n    }\n  },\n  norm: {\n    get: function() {\n      return Math.sqrt(this.normSquared);\n    },\n    set: function(newNorm) {\n      if (this.x === 0 && this.y === 0) {\n        return;\n      }\n      var norm = this.norm;\n      this.x *= newNorm / norm;\n      this.y *= newNorm / norm;\n    }\n  }\n});\n\nmodule.exports = Vector;\n","var Vector = require(\"./vector\");\n\nfunction Rectangle(props) {\n  this.x = props.x;\n  this.y = props.y;\n  this.width = props.width !== undefined ? props.width : 0;\n  this.height = props.height !== undefined ? props.height : 0;\n}\n\nObject.defineProperties(Rectangle.prototype, {\n  left: {\n    get: function() {\n      return this.width >= 0 ? this.x : this.x + this.width;\n    },\n    set: function(left) {\n      this.x = left;\n    }\n  },\n  top: {\n    get: function() {\n      return this.height >= 0 ? this.y : this.y + this.height;\n    },\n    set: function(left) {\n      this.y = bottom;\n    }\n  },\n  right: {\n    get: function() {\n      return this.width >= 0 ? this.x + this.width : this.x;\n    },\n    set: function(right) {\n      if (this.width === Number.POSITIVE_INFINITY) {\n        this.x = Number.NEGATIVE_INFINITY; // edge case\n      } else {\n        this.x = right - this.width;\n      }\n    }\n  },\n  bottom: {\n    get: function() {\n      return this.height >= 0 ? this.y + this.height : this.y;\n    },\n    set: function(bottom) {\n      if (this.height === Number.POSITIVE_INFINITY) {\n        this.y = Number.NEGATIVE_INFINITY; // edge case\n      } else {\n        this.y = bottom - this.height;\n      }\n    }\n  },\n  center: {\n    get: function() {\n      return new Vector(this.x + this.width / 2, this.y + this.height / 2);\n    },\n    set: function(x, y) {\n      this.x = x - this.width / 2;\n      this.y = y - this.height / 2;\n    }\n  }\n});\n\n// static methods\nRectangle.minkowskiDifference = function(r1, r2) {\n  return new Rectangle({\n    x: r1.left - r2.right,\n    y: r1.top - r2.bottom,\n    width: r1.width + r2.width,\n    height: r1.height + r2.height\n  });\n};\n\n// public methods\nRectangle.prototype.inflate = function(dx, dy) {\n  this.x -= dx;\n  this.width += 2 * dx;\n  this.y -= dy;\n  this.height += 2 * dy;\n  return this;\n};\n\nRectangle.prototype.resize = function(width, height) {\n  this.width = width;\n  this.height = height;\n  return this;\n};\n\nRectangle.prototype.getBoundingRect = function() {\n  return this;\n};\n\nRectangle.prototype.within = function(r) {\n  return (\n    r.left <= this.left &&\n    r.right >= this.right &&\n    r.top <= this.top &&\n    r.bottom >= this.bottom\n  );\n};\n\nRectangle.prototype.overlaps = function(r) {\n  return (\n    this.left < r.right &&\n    r.left < this.right &&\n    this.top < r.bottom &&\n    r.top < this.bottom\n  );\n};\n\nRectangle.prototype.contains = function(x, y) {\n  return x >= this.left && x <= this.right && y >= this.top && y <= this.bottom;\n};\n\nRectangle.prototype.containsStrict = function(x, y) {\n  return x > this.left && x < this.right && y > this.top && y < this.bottom;\n};\n\nmodule.exports = Rectangle;\n","var Key = require(\"./Key\");\nvar keyCodes = require(\"./keyCodes\");\n\nfunction Keyboard(game) {\n  this.game = game;\n  this.handleKeyup = this.handleKeyup.bind(this);\n  this.handleKeydown = this.handleKeydown.bind(this);\n\n  this.preventDefault = false;\n  this.keys = keyCodes.reduce(function(keys, keyCode) {\n    return Object.assign(keys, { [keyCode]: new Key(keyCode) });\n  }, {});\n  this.bindEventHandlers();\n}\n\nKeyboard.prototype.handleKeydown = function handleKeydown(event) {\n  var key = this.keys[event.code];\n  if (!key.isEnabled) return;\n\n  if (this.preventDefault) {\n    event.preventDefault ? event.preventDefault() : (event.returnValue = false);\n  }\n\n  key.event = event;\n  key.isPressed = true;\n  key.pressStart = event.timestamp;\n  key.shiftKey = event.shiftKey;\n  key.ctrlKey = event.ctrlKey;\n  key.altKey = event.altKey;\n  key.metaKey = event.metaKey;\n  key.repeat = event.repeat;\n\n  key.onDown.call(this.game);\n};\n\nKeyboard.prototype.handleKeyup = function handleKeyup(event) {\n  var key = this.keys[event.code];\n  if (!key.isEnabled) return;\n\n  if (this.preventDefault) {\n    event.preventDefault ? event.preventDefault() : (event.returnValue = false);\n  }\n\n  key.event = event;\n  key.isPressed = false;\n  key.pressEnd = event.timestamp;\n  key.pressDuration = key.pressEnd - key.pressStart;\n  key.shiftKey = event.shiftKey;\n  key.ctrlKey = event.ctrlKey;\n  key.altKey = event.altKey;\n  key.metaKey = event.metaKey;\n  key.repeat = event.repeat;\n\n  key.onUp.call(this.game);\n};\n\nKeyboard.prototype.bindEventHandlers = function() {\n  window.addEventListener(\"keydown\", this.handleKeydown);\n  window.addEventListener(\"keyup\", this.handleKeyup);\n};\n\nKeyboard.prototype.unbindEventHandlers = function() {\n  window.removeEventListener(\"keydown\", this.handleKeydown);\n  window.removeEventListener(\"keyup\", this.handleKeyup);\n};\n\nKeyboard.prototype.disable = function() {\n  this.preventDefault = false;\n};\n\nKeyboard.prototype.enable = function() {\n  this.preventDefault = true;\n};\n\nmodule.exports = Keyboard;\n","var modes = {\n  SPRING_IN: 0,\n  SPRING_OUT: 1,\n  STATIC: 2\n};\n\nvar TouchManager = (function() {\n  function TouchManager(game) {\n    // reference to the game object\n    this.game = game;\n\n    // minimum distance travelled by joypad to trigger action\n    this.JOYPAD_THRESHOLD_X = 10;\n    this.JOYPAD_THRESHOLD_Y = 10;\n\n    // joypad\n    this.joypadMode = modes.SPRING_IN;\n    this.joypadOuter = document.getElementById(\"joypad-outer\");\n    this.joypad = document.getElementById(\"joypad\");\n\n    this.joypadWidth = parseInt(window.getComputedStyle(this.joypad).width);\n    this.joypadHeight = parseInt(window.getComputedStyle(this.joypad).height);\n\n    this.handleJoypadTouch = this.handleJoypadTouch.bind(this);\n    this.handleJoypadTouchEnd = this.handleJoypadTouchEnd.bind(this);\n\n    this.bindEventHandlers();\n\n    // mobile input\n    this.buttonLeft = document.getElementById(\"button-left-clickable-area\");\n    this.buttonRight = document.getElementById(\"button-right-clickable-area\");\n    this.buttonA = document.getElementById(\"button-a-clickable-area\");\n    this.buttonB = document.getElementById(\"button-b-clickable-area\");\n\n    this.buttonLeft.addEventListener(\n      \"touchstart\",\n      function(event) {\n        event.preventDefault();\n        this.buttonLeft.classList.add(\"touched\");\n        this.BUTTON_LEFT = true;\n      }.bind(this)\n    );\n    this.buttonLeft.addEventListener(\n      \"touchend\",\n      function(event) {\n        event.preventDefault();\n        this.buttonLeft.classList.remove(\"touched\");\n        this.BUTTON_LEFT = false;\n      }.bind(this)\n    );\n    this.buttonRight.addEventListener(\n      \"touchstart\",\n      function(event) {\n        event.preventDefault();\n        this.buttonRight.classList.add(\"touched\");\n        this.BUTTON_RIGHT = true;\n      }.bind(this)\n    );\n    this.buttonRight.addEventListener(\n      \"touchend\",\n      function(event) {\n        event.preventDefault();\n        this.buttonRight.classList.remove(\"touched\");\n        this.BUTTON_RIGHT = false;\n      }.bind(this)\n    );\n    this.buttonA.addEventListener(\n      \"touchstart\",\n      function(event) {\n        event.preventDefault();\n        this.buttonA.classList.add(\"touched\");\n        this.BUTTON_A = true;\n      }.bind(this)\n    );\n    this.buttonA.addEventListener(\n      \"touchend\",\n      function(event) {\n        event.preventDefault();\n        this.buttonA.classList.remove(\"touched\");\n        this.BUTTON_A = false;\n      }.bind(this)\n    );\n    this.buttonB.addEventListener(\n      \"touchstart\",\n      function(event) {\n        event.preventDefault();\n        this.buttonB.classList.add(\"touched\");\n        this.BUTTON_B = true;\n      }.bind(this)\n    );\n    this.buttonB.addEventListener(\n      \"touchend\",\n      function(event) {\n        event.preventDefault();\n        this.buttonB.classList.remove(\"touched\");\n        this.BUTTON_B = false;\n      }.bind(this)\n    );\n  }\n\n  TouchManager.prototype.handleJoypadTouch = function handleJoypadTouch(event) {\n    event.preventDefault();\n\n    // disable transitions\n    this.joypad.style.transition = null;\n\n    // find joypad origin (center)\n    var joypadOuterRect = this.joypadOuter.getBoundingClientRect();\n    var joypadOriginX = joypadOuterRect.left + joypadOuterRect.width / 2;\n    var joypadOriginY = joypadOuterRect.top + joypadOuterRect.height / 2;\n\n    // retrieve the touch associated with this event\n    var eventTouch = null;\n    for (var i = 0; i < event.touches.length; i++) {\n      var touch = event.touches.item(i);\n      if (touch.target === this.joypadOuter || touch.target === joypad) {\n        eventTouch = touch;\n        break;\n      }\n    }\n\n    // touch coordinates\n    var touchX = eventTouch.clientX;\n    var touchY = eventTouch.clientY;\n\n    // joypad displacement\n    var deltaX = touchX - joypadOriginX;\n    var deltaY = touchY - joypadOriginY;\n    var angle = Math.atan2(deltaY, deltaX);\n\n    // confine joypad to the outer circle\n    var maxDeltaX =\n      (Math.cos(angle) * (joypadOuterRect.width - this.joypadWidth)) / 2;\n    var maxDeltaY =\n      (Math.sin(angle) * (joypadOuterRect.height - this.joypadHeight)) / 2;\n\n    this.JOYPAD_LEFT = false;\n    this.JOYPAD_RIGHT = false;\n    if (deltaX > 0) {\n      this.joypad.style.left =\n        joypadOuterRect.width / 2 + Math.min(maxDeltaX, deltaX) + \"px\";\n      if (Math.abs(deltaX) >= this.JOYPAD_THRESHOLD_X) {\n        this.JOYPAD_RIGHT = true;\n      }\n    }\n    if (deltaX < 0) {\n      this.joypad.style.left =\n        joypadOuterRect.width / 2 + Math.max(maxDeltaX, deltaX) + \"px\";\n      if (Math.abs(deltaX) >= this.JOYPAD_THRESHOLD_X) {\n        this.JOYPAD_LEFT = true;\n      }\n    }\n\n    this.JOYPAD_UP = false;\n    this.JOYPAD_DOWN = false;\n    if (deltaY > 0) {\n      this.joypad.style.top =\n        joypadOuterRect.height / 2 + Math.min(maxDeltaY, deltaY) + \"px\";\n      if (Math.abs(deltaY) >= this.JOYPAD_THRESHOLD_Y) {\n        // this.JOYPAD_DOWN = true;\n      }\n    }\n    if (deltaY < 0) {\n      this.joypad.style.top =\n        joypadOuterRect.height / 2 + Math.max(maxDeltaY, deltaY) + \"px\";\n      if (Math.abs(deltaY) >= this.JOYPAD_THRESHOLD_Y) {\n        // this.JOYPAD_UP = true;\n      }\n    }\n  };\n\n  TouchManager.prototype.handleJoypadTouchEnd = function handleJoypadTouchEnd(\n    event\n  ) {\n    event.preventDefault();\n    var joypadOuterRect = this.joypadOuter.getBoundingClientRect();\n    console.log(\"TCL: TouchManager -> this.joypadMode\", this.joypadMode);\n\n    if (this.joypadMode === modes.SPRING_IN) {\n      this.joypad.style.transition = \"all 0.07s ease-in-out\";\n      this.joypad.style.left = joypadOuterRect.width / 2 + \"px\";\n      this.joypad.style.top = joypadOuterRect.height / 2 + \"px\";\n      this.JOYPAD_UP = false;\n      this.JOYPAD_DOWN = false;\n      this.JOYPAD_RIGHT = false;\n      this.JOYPAD_LEFT = false;\n    }\n\n    if (this.joypadMode === modes.SPRING_OUT) {\n      this.joypad.style.transition = \"all 0.07s ease-in-out\";\n      this.joypad.style.left = joypadOuterRect.width / 2 + \"px\";\n      this.joypad.style.top = joypadOuterRect.height / 2 + \"px\";\n    }\n  };\n\n  TouchManager.prototype.bindEventHandlers = function bindEventHandlers() {\n    this.joypadOuter.addEventListener(\"touchstart\", this.handleJoypadTouch);\n    this.joypadOuter.addEventListener(\"touchmove\", this.handleJoypadTouch);\n    this.joypadOuter.addEventListener(\"touchend\", this.handleJoypadTouchEnd);\n  };\n\n  TouchManager.prototype.unbindEventHandlers = function unbindEventHandlers() {\n    this.joypadOuter.removeEventListener(\"touchstart\", this.handleJoypadTouch);\n    this.joypadOuter.removeEventListener(\"touchmove\", this.handleJoypadTouch);\n    this.joypadOuter.removeEventListener(\"touchend\", this.handleJoypadTouchEnd);\n  };\n\n  return TouchManager;\n})();\n\nmodule.exports = TouchManager;\n","var Sound = require(\"./sound\");\n\nvar SoundManager = (function() {\n  function SoundManager(gameData) {\n    this.masterVolume = 1;\n    this.sounds = {};\n    this.musics = {};\n    this.pausedSounds = [];\n\n    var soundData = gameData.sounds;\n    var musicData = gameData.musics;\n    var location, files;\n\n    location = soundData.location;\n    files = soundData.files;\n\n    // load sounds\n    files.forEach(function(file) {\n      var filename = file.filename;\n\n      var sound = new Sound(location + filename);\n      sound.volume = file.volume * this.masterVolume;\n\n      this.sounds[filename] = sound;\n    }, this);\n\n    location = musicData.location;\n    files = musicData.files;\n\n    // load musics\n    files.forEach(function(file) {\n      var filename = file.filename;\n\n      var sound = new Sound(location + filename);\n      sound.volume = file.volume * this.masterVolume;\n\n      this.sounds[filename] = sound;\n    }, this);\n  }\n\n  SoundManager.prototype.stopAll = function() {\n    for (var sound in this.sounds) {\n      sound.stop();\n    }\n  };\n\n  SoundManager.prototype.pauseAll = function() {\n    for (var sound in this.sounds) {\n      if (sound.isPlaying) {\n        this.pausedSounds.push(sound);\n        sound.pause();\n      }\n    }\n  };\n\n  SoundManager.prototype.playPaused = function() {\n    this.pausedSounds.forEach(function(pausedSound) {\n      pausedSound.play();\n    });\n  };\n\n  return SoundManager;\n})();\n\nmodule.exports = SoundManager;\n","function Sound(src, volume, options) {\n  if (options) {\n    this.sound.loop = options.loop || false;\n    this.sound.isMusic = options.isMusic || false;\n  }\n  this.sound = new Audio(src);\n  this.sound.volume = volume !== undefined ? volume : 1;\n  this.isPlaying = false;\n}\n\nSound.prototype.play = function() {\n  this.sound.play();\n  this.isPlaying = true;\n};\n\nSound.prototype.pause = function() {\n  this.sound.pause();\n  this.isPlaying = true;\n};\n\nSound.prototype.stop = function() {\n  this.pause();\n  this.rewind();\n};\n\nSound.prototype.rewind = function() {\n  this.sound.currentTime = 0;\n};\n\nSound.prototype.replay = function() {\n  this.rewind();\n  this.play();\n};\n\nmodule.exports = Sound;\n","var Rectangle = require(\"./geometry/rectangle\");\nvar Vector = require(\"./geometry/vector\");\n\nvar AXIS = {\n  NONE: \"none\",\n  HORIZONTAL: \"horizontal\",\n  VERTICAL: \"vertical\",\n  BOTH: \"both\"\n};\n\nfunction Camera(props) {\n  /**\n   *  Zoom level works as follows:\n   *    zoom level = 0.5 -> object size is HALVED\n   *    zoom level = 1 -> objects have their normal size\n   *    zoom level = 2 -> object size is DOUBLED\n   *    etc.\n   */\n  this.zoomLevel = props.zoomLevel || 1;\n  this.height = canvas.height / this.zoomLevel;\n  this.width = canvas.width / this.zoomLevel;\n  this.canvas = props.canvas;\n  this.worldRect = props.worldRect;\n\n  this.zoomingRate = 1.1;\n\n  Rectangle.call(this, {\n    x: props.x,\n    y: props.y,\n    width: this.canvas.width,\n    height: this.canvas.height\n  });\n\n  this.xDeadZone = this.canvas.width / 3; // min distance to horizontal borders\n  this.yDeadZone = this.canvas.height / 3; // min distance to vertical borders\n\n  this.axis = AXIS.BOTH;\n\n  this.followed = null;\n\n  this.shouldStayWithinWorldBounds = false;\n}\n\nCamera.prototype = Object.create(Rectangle.prototype);\nCamera.prototype.constructor = Camera;\n\nCamera.prototype.follow = function(gameObject, xDeadZone, yDeadZone) {\n  this.followed = gameObject;\n  this.x = this.followed.center.x - this.width / 2;\n  this.y = this.followed.center.y - this.height / 2;\n  this.xDeadZone = xDeadZone;\n  this.yDeadZone = yDeadZone;\n  // this.xClearZone = xClearZone;\n  // this.yClearZone = yClearZone;\n};\n\nCamera.prototype.update = function() {\n  this.updateDimensions();\n  if (this.followed) {\n    var xDeadZone = Math.min(\n      (this.width - this.followed.width) / 2,\n      this.yDeadZone\n    );\n    var yDeadZone = Math.min(\n      (this.height - this.followed.height) / 2,\n      this.xDeadZone\n    );\n  }\n\n  // keep following the player (or other desired object)\n  if (this.followed != null) {\n    if (this.axis == AXIS.HORIZONTAL || this.axis == AXIS.BOTH) {\n      // moves camera on horizontal axis based on followed object position\n      if (this.followed.right + xDeadZone > this.right) {\n        this.x = this.followed.right + xDeadZone - this.width;\n      } else if (this.followed.left - xDeadZone < this.left) {\n        this.x = this.followed.left - xDeadZone;\n      }\n    }\n    if (this.axis == AXIS.VERTICAL || this.axis == AXIS.BOTH) {\n      // moves camera on vertical axis based on followed object position\n      if (this.followed.bottom + yDeadZone > this.bottom) {\n        this.y = this.followed.bottom + yDeadZone - this.height;\n      } else if (this.followed.top - yDeadZone < this.top) {\n        this.y = this.followed.top - yDeadZone;\n      }\n    }\n  }\n\n  // don't let camera leave the world's boundaries\n  if (\n    this.shouldStayWithinWorldBounds &&\n    !new Rectangle({\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: this.height\n    }).within(this.worldRect)\n  ) {\n    if (this.x < this.worldRect.left) {\n      this.x = this.worldRect.left;\n    }\n    if (this.y < this.worldRect.top) {\n      this.y = this.worldRect.top;\n    }\n    if (this.x + this.width > this.worldRect.right) {\n      this.x = this.worldRect.right - this.width;\n    }\n    if (this.y + this.height > this.worldRect.bottom) {\n      this.y = this.worldRect.bottom - this.height;\n    }\n  }\n};\n\nCamera.prototype.updateDimensions = function() {\n  this.height = this.canvas.height / this.zoomLevel;\n  this.width = this.canvas.width / this.zoomLevel;\n};\n\nCamera.prototype.zoomIn = function(x, y) {\n  var centerX = x !== undefined ? x : this.followed.center.x;\n  var centerY = y !== undefined ? y : this.followed.center.y;\n\n  this.zoomLevel *= this.zoomingRate;\n  if (this.zoomLevel > 8) {\n    this.zoomLevel = 8;\n  } else {\n    this.x = (this.x - centerX) / this.zoomingRate + centerX;\n    this.y = (this.y - centerY) / this.zoomingRate + centerY;\n  }\n};\n\nCamera.prototype.zoomOut = function(x, y) {\n  var centerX = x !== undefined ? x : this.followed.center.x;\n  var centerY = y !== undefined ? y : this.followed.center.y;\n\n  this.zoomLevel /= this.zoomingRate;\n  if (this.zoomLevel < 0.02) {\n    this.zoomLevel = 0.02;\n  } else {\n    this.x = (this.x - centerX) * this.zoomingRate + centerX;\n    this.y = (this.y - centerY) * this.zoomingRate + centerY;\n  }\n};\n\n/*\n    Transform game coordinates to screen coordinates, or transform game length to screen length.\n  */\nCamera.prototype.applyToX = function(x) {\n  return Math.round((x - this.x) * this.zoomLevel);\n};\n\nCamera.prototype.applyToY = function(y) {\n  return Math.round((y - this.y) * this.zoomLevel);\n};\n\nCamera.prototype.apply = function(x, y) {\n  return new Vector(this.applyToX(x), this.applyToY(y));\n};\n\nCamera.prototype.applyToDistance = function(distance) {\n  return Math.round(distance * this.zoomLevel);\n};\n\n/*\n    Transform screen coordinates to game coordinates, or transform screen length to game length.\n  */\nCamera.prototype.unapplyToX = function(x) {\n  return Math.round(x / this.zoomLevel + this.x);\n};\n\nCamera.prototype.unapplyToY = function(y) {\n  return Math.round(y / this.zoomLevel + this.y);\n};\n\nCamera.prototype.unapply = function(x, y) {\n  return new Vector(this.unapplyToX(x), this.unapplyToY(y));\n};\n\nCamera.prototype.unapplyToDistance = function(distance) {\n  return Math.round(distance / this.zoomLevel);\n};\n\nmodule.exports = Camera;\n","var utils = require(\"../utils\");\n\nvar GameTimer = (function() {\n  function GameTimer() {}\n\n  Object.defineProperties(GameTimer.prototype, {\n    dt: {\n      get: function() {\n        return utils.toFixedPrecision(\n          (this.currentTime - this.previousTime) / 1000,\n          4\n        );\n      }\n    }\n  });\n\n  GameTimer.prototype.update = function() {\n    this.previousTime = this.currentTime;\n    this.currentTime = Date.now();\n    this.totalTime += this.currentTime - this.previousTime;\n  };\n\n  GameTimer.prototype.reset = function() {\n    this.totalTime = 0;\n    this.currentTime = Date.now();\n    this.previousTime = this.currentTime;\n  };\n\n  return GameTimer;\n})();\n\nmodule.exports = GameTimer;\n","var Rectangle = require(\"./rectangle\");\nvar Vector = require(\"./vector\");\n\nvar Segment = (function() {\n  function Segment(A, B) {\n    this.A = A;\n    this.B = B;\n  }\n\n  Segment.prototype.getBoundingRect = function() {\n    return new Rectangle({\n      x: Math.min(this.A.x, this.B.x),\n      y: Math.min(this.A.y, this.B.y),\n      width: Math.abs(this.B.x - this.A.x),\n      height: Math.abs(this.B.y - this.A.y)\n    });\n  };\n\n  Segment.prototype.isOrthogonalProjectedPointOnSegment = function(P) {\n    var AB = Vector.subtract(this.B, this.A);\n    var AP = Vector.subtract(P, this.A);\n    var BP = Vector.subtract(P, this.B);\n    return Vector.dotProduct(AB, AP) * Vector.dotProduct(AB, BP) <= 0;\n  };\n\n  Segment.prototype.getOrthogonalProjectionOfPoint = function(P) {\n    var u = Vector.subtract(this.B, this.A).getUnitVector();\n    var AP = Vector.subtract(P, this.A);\n    var AH = Vector.dotProduct(AP, u);\n\n    return Vector.sum(this.A, u.scale(AH));\n  };\n\n  Segment.prototype.getDistanceFromPoint = function(P) {\n    // return Vector.subtract(this.getOrthogonalProjectionOfPoint(P), P).norm;\n    var AB = Vector.subtract(this.B, this.A);\n    var t = Vector.dotProduct(Vector.subtract(P, this.A), AB) / AB.norm;\n    if (t < 0) {\n      return Vector.subtract(A, P).norm;\n    } else if (t > 1) {\n      return Vector.subtract(B, P).norm;\n    } else {\n    }\n  };\n\n  Segment.prototype.getDistanceFromPointToLine = function(P) {\n    var n = Vector.subtract(this.B, this.A)\n      .getUnitVector()\n      .getNormalVector();\n    var d = Math.abs(Vector.dotProduct(Vector.subtract(P, this.A), n));\n    return d;\n  };\n\n  Segment.prototype.getClosestPointOnSegment = function(P) {\n    var AP = Vector.subtract(P, this.A);\n    var AB = Vector.subtract(this.B, this.A);\n    var normAB = AB.norm;\n    var u = AB.scale(1 / normAB); // unit vector of AB\n    var t = Vector.dotProduct(AP, u) / normAB;\n\n    if (t < 0) {\n      return this.A;\n    } else if (t > 1) {\n      return this.B;\n    } else {\n      var AH = Vector.dotProduct(AP, u);\n      return Vector.sum(this.A, u.scale(AH));\n    }\n  };\n\n  Segment.prototype.getPointOfIntersectionWithCircle = function(c) {\n    var C = new Vector(c.x, c.y);\n    var H = this.getClosestPointOnSegment(C);\n    if ((CH = Vector.subtract(H, C).normSquared < Math.pow(c.r, 2))) {\n      return H;\n    }\n    return false;\n  };\n\n  return Segment;\n})();\n\nmodule.exports = Segment;\n","function Tile(x, y, size, src) {\n  this.x = x;\n  this.y = y;\n  this.size = size;\n  this.image = new Image();\n  this.image.src = src;\n}\n\nTile.prototype.draw = function(ctx, camera) {\n  ctx.save();\n  ctx.drawImage(\n    this.image,\n    camera.applyToX(this.x),\n    camera.applyToY(this.y),\n    camera.applyToDistance(this.size),\n    camera.applyToDistance(this.size)\n  );\n  ctx.restore();\n};\n\nmodule.exports = Tile;\n","var SDK = {\n  Game: require(\"./Game\"),\n  Rectangle: require(\"./geometry/rectangle\"),\n  Circle: require(\"./geometry/circle\"),\n  Vector: require(\"./geometry/vector\"),\n  Segment: require(\"./geometry/segment\"),\n  Camera: require(\"./camera\"),\n  GameTimer: require(\"./gameTimer\"),\n  Grid: require(\"./grid\"),\n  Input: require(\"./input\"),\n  Keyboard: require(\"./input/keyboard/Keyboard\"),\n  MouseManager: require(\"./input/mouse/mouseManager\"),\n  TouchManager: require(\"./input/touch/touchManager\"),\n  Particle: require(\"./particle\"),\n  physics: require(\"./physics\"),\n  Sound: require(\"./sound/sound\"),\n  SoundManager: require(\"./sound/soundManager\"),\n  Tile: require(\"./tile\"),\n  Tilemap: require(\"./tilemap\")\n};\n\nmodule.exports = SDK;\n\nglobal.SDK = SDK;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","var Keyboard = require(\"./input/keyboard/Keyboard\");\nvar TouchManager = require(\"./input/touch/touchManager\");\nvar SoundManager = require(\"./sound/soundManager\");\nvar Camera = require(\"./camera\");\nvar GameTimer = require(\"./gameTimer\");\n\nfunction Game() {\n  // initalize canvas(es) and html elements\n  this.canvas = document.getElementById(\"canvas\");\n  this.ctx = this.canvas.getContext(\"2d\");\n\n  // initialize keyboard & sound\n  this.keyboard = new Keyboard(this);\n  this.touchInput = new TouchManager(this);\n  this.soundManager = new SoundManager(gameData);\n\n  // camera\n  this.camera = new Camera({\n    canvas: this.canvas\n  });\n\n  // game timer (game inner logic)\n  this.timer = new GameTimer();\n}\n\n/**\n * Main method. Runs game simulation.\n */\nGame.prototype.step = function() {\n  this.timer.update();\n  dt = this.timer.dt;\n\n  this.update();\n  this.render(this.ctx, this.camera);\n\n  this.frame = requestAnimationFrame(this.step.bind(this));\n};\n\nmodule.exports = Game;\n","function Key(keyCode) {\n  // Corresponds to event.code\n  this.keyCode = keyCode;\n\n  // Reference to last event fired targeting this key\n  this.event;\n\n  // key location (0: general keys, 1: left, 2: right)\n  this.location;\n\n  // key character; will be overridden\n  this.key;\n\n  // Boolean that represents whether the key has repeated\n  this.repeat = false;\n\n  // Modifiers\n  this.altKey = false;\n  this.shiftKey = false;\n  this.metaKey = false;\n\n  // Boolean that is true if this key is down\n  this.isPressed = false;\n\n  // timestamp when the key was pressed\n  this.pressStart;\n\n  // timestamp when the key was released\n  this.pressEnd;\n\n  // duration of the last press\n  this.pressDuration;\n\n  // Whether this key receives events\n  this.isEnabled = true;\n\n  // callback that is called when key is pressed\n  this.onDown = function() {};\n\n  // callback that is called when key is released\n  this.onUp = function() {};\n}\n\nmodule.exports = Key;\n","var keyCodes = [\n  // Function keys row\n  \"Escape\",\n  \"F1\",\n  \"F2\",\n  \"F3\",\n  \"F4\",\n  \"F5\",\n  \"F6\",\n  \"F7\",\n  \"F8\",\n  \"F9\",\n  \"F10\",\n  \"F11\",\n  \"F12\",\n  // Modifier keys\n  \"ShiftLeft\",\n  \"ShiftRight\",\n  \"ControlLeft\",\n  \"ControlRight\",\n  \"MetaLeft\",\n  \"MetaRight\",\n  \"AltLeft\",\n  \"AltRight\",\n  // Letters & punctuation\n  \"KeyA\",\n  \"KeyB\",\n  \"KeyC\",\n  \"KeyD\",\n  \"KeyE\",\n  \"KeyF\",\n  \"KeyG\",\n  \"KeyH\",\n  \"KeyI\",\n  \"KeyJ\",\n  \"KeyK\",\n  \"KeyL\",\n  \"KeyM\",\n  \"KeyN\",\n  \"KeyO\",\n  \"KeyP\",\n  \"KeyQ\",\n  \"KeyR\",\n  \"KeyS\",\n  \"KeyT\",\n  \"KeyU\",\n  \"KeyV\",\n  \"KeyW\",\n  \"KeyX\",\n  \"KeyY\",\n  \"KeyZ\",\n  \"BracketLeft\",\n  \"BracketRight\",\n  \"Semicolon\",\n  \"Quote\",\n  \"Backslash\",\n  \"Comma\",\n  \"Period\",\n  \"Slash\",\n  \"IntlBackslash\",\n  \"ContextMenu\",\n  \"CapsLock\",\n  \"Enter\",\n  \"Space\",\n  \"Tab\",\n  \"Backspace\",\n  // Number keys row\n  \"Backquote\",\n  \"Digit1\",\n  \"Digit2\",\n  \"Digit3\",\n  \"Digit4\",\n  \"Digit5\",\n  \"Digit6\",\n  \"Digit7\",\n  \"Digit8\",\n  \"Digit9\",\n  \"Digit0\",\n  \"Minus\",\n  \"Equal\",\n  // Navigation keys\n  \"PrintScreen\",\n  \"ScrollLock\",\n  \"Pause\",\n  \"Insert\",\n  \"Home\",\n  \"PageUp\",\n  \"Delete\",\n  \"End\",\n  \"PageDown\",\n  \"ArrowUp\",\n  \"ArrowLeft\",\n  \"ArrowDown\",\n  \"ArrowRight\",\n  // Numpad\n  \"NumLock\",\n  \"Numpad1\",\n  \"Numpad2\",\n  \"Numpad3\",\n  \"Numpad4\",\n  \"Numpad5\",\n  \"Numpad6\",\n  \"Numpad7\",\n  \"Numpad8\",\n  \"Numpad9\",\n  \"Numpad0\",\n  \"NumpadAdd\",\n  \"NumpadSubtract\",\n  \"NumpadDecimal\",\n  \"NumpadEnter\",\n  \"NumpadDivide\",\n  \"NumpadEqual\",\n  \"NumpadComma\",\n  \"NumpadMultiply\"\n];\n\nmodule.exports = keyCodes;\n","var Rectangle = require(\"./rectangle\");\nvar Vector = require(\"./vector\");\n\n/**\n * A generic circle class.\n * @param {number} x\n * @param {number} y\n * @param {number} r\n */\nfunction Circle(x, y, r) {\n  this.x = x || 0;\n  this.y = y || 0;\n  this.r = r || 0;\n}\n\nObject.defineProperties(Circle.prototype, {\n  diameter: {\n    get: function() {\n      return this.r * 2;\n    }\n  },\n  center: {\n    get: function() {\n      return new Vector(this.x, this.y);\n    }\n  },\n  area: {\n    get: function() {\n      return Math.PI * this.r * this.r;\n    }\n  },\n  left: {\n    get: function() {\n      return this.x - this.r;\n    }\n  },\n  right: {\n    get: function() {\n      return this.x + this.r;\n    }\n  },\n  top: {\n    get: function() {\n      return this.y - this.r;\n    }\n  },\n  bottom: {\n    get: function() {\n      return this.y + this.r;\n    }\n  }\n});\n\nCircle.prototype.moveTo = function(x, y) {\n  this.x = x;\n  this.y = y;\n};\n\n/**\n * Determines whether the circle contains a point.\n * @param {number} x\n * @param {number} y\n */\nCircle.prototype.containsPoint = function(x, y) {\n  return (\n    Math.pow(x - this.x, 2) + Math.pow(y - this.y, 2) < Math.pow(this.r, 2)\n  );\n};\n\nCircle.prototype.getBoundingRect = function() {\n  return new Rectangle({\n    x: this.x - this.r,\n    y: this.y - this.r,\n    width: this.r * 2,\n    height: this.r * 2\n  });\n};\n\nmodule.exports = Circle;\n","var Vector = require(\"./geometry/vector\");\n\nvar Grid = (function() {\n  function Grid(props) {\n    this.camera = props.camera;\n    this.canvas = props.canvas;\n    this.mouse = props.mouse;\n    this.options = props.options;\n\n    // grid config\n    this.cursorSize = 10;\n    this.cursorColor = \"white\";\n    this.innerGridSize = 100;\n    this.precisionAreaSize = this.innerGridSize;\n    this.precisionGridSize = this.innerGridSize / 10;\n    this.isPrecisionAreaRound = false; // otherwise square\n  }\n\n  Grid.prototype.getMousePosSnappedToGrid = function(mouseX, mouseY) {\n    var camera = this.camera;\n    var precisionGridSize = this.precisionGridSize;\n\n    var mouseGamePos = camera.unapply(mouseX, mouseY);\n    var snappedMouseGamePos = new Vector(\n      Math.round(mouseGamePos.x / precisionGridSize) * precisionGridSize,\n      Math.round(mouseGamePos.y / precisionGridSize) * precisionGridSize\n    );\n    return camera.apply(snappedMouseGamePos.x, snappedMouseGamePos.y);\n  };\n\n  Grid.prototype.getMouseGamePosSnappedToGrid = function(mouseX, mouseY) {\n    var camera = this.camera;\n    var mousePosSnappedToGrid = this.getMousePosSnappedToGrid(mouseX, mouseY);\n    return camera.unapply(mousePosSnappedToGrid.x, mousePosSnappedToGrid.y);\n  };\n\n  Grid.prototype._drawRulers = function(ctx, camera) {\n    var innerGridSize = this.innerGridSize;\n    var minX = Math.floor(camera.left / innerGridSize, 2) * innerGridSize;\n    var maxX = Math.ceil(camera.right / innerGridSize, 2) * innerGridSize;\n    var minY = Math.floor(camera.top / innerGridSize, 2) * innerGridSize;\n    var maxY = Math.ceil(camera.bottom / innerGridSize, 2) * innerGridSize;\n\n    ctx.save();\n    ctx.font = \"bold 16px Arial\";\n    ctx.fillStyle = gameData.colors.STAR_WARS_YELLOW; // Star Wars yellow\n    ctx.strokeStyle = \"white\";\n    for (var i = minX; i <= maxX; i += innerGridSize) {\n      ctx.beginPath();\n      ctx.moveTo(camera.applyToX(i), camera.applyToY(camera.top));\n      ctx.lineTo(camera.applyToX(i), camera.applyToY(camera.top) + 10);\n      ctx.stroke();\n      ctx.beginPath();\n      ctx.moveTo(camera.applyToX(i), camera.applyToY(camera.bottom));\n      ctx.lineTo(camera.applyToX(i), camera.applyToY(camera.bottom) - 10);\n      ctx.stroke();\n      if (i % (innerGridSize * 5) === 0) {\n        ctx.fillText(\n          i,\n          camera.applyToX(i) + 10,\n          camera.applyToY(camera.top) + 20\n        );\n        ctx.fillText(\n          i,\n          camera.applyToX(i) + 10,\n          camera.applyToY(camera.bottom) - 10\n        );\n      }\n    }\n    for (var i = minY; i <= maxY; i += innerGridSize) {\n      ctx.beginPath();\n      ctx.moveTo(camera.applyToX(camera.left), camera.applyToY(i));\n      ctx.lineTo(camera.applyToX(camera.left) + 10, camera.applyToY(i));\n      ctx.stroke();\n      ctx.moveTo(camera.applyToX(camera.right), camera.applyToY(i));\n      ctx.lineTo(camera.applyToX(camera.right) - 10, camera.applyToY(i));\n      ctx.stroke();\n      if (i % (innerGridSize * 5) === 0) {\n        ctx.textAlign = \"left\";\n        ctx.fillText(\n          -i,\n          camera.applyToX(camera.left) + 10,\n          camera.applyToY(i) - 10\n        );\n        ctx.textAlign = \"right\";\n        ctx.fillText(\n          -i,\n          camera.applyToX(camera.right) - 10,\n          camera.applyToY(i) - 10\n        );\n      }\n    }\n    ctx.restore();\n  };\n\n  Grid.prototype._drawInnerGrid = function(ctx, camera) {\n    var innerGridSize = this.innerGridSize;\n    var minX = Math.floor(camera.left / innerGridSize, 2) * innerGridSize;\n    var maxX = Math.ceil(camera.right / innerGridSize, 2) * innerGridSize;\n    var minY = Math.floor(camera.top / innerGridSize, 2) * innerGridSize;\n    var maxY = Math.ceil(camera.bottom / innerGridSize, 2) * innerGridSize;\n\n    for (var i = minX; i <= maxX; i += innerGridSize) {\n      if (i % (innerGridSize * 5) === 0) {\n        ctx.strokeStyle = \"rgba(255, 255, 255, 0.7)\";\n      } else {\n        ctx.strokeStyle = \"rgba(255, 255, 255, 0.3)\";\n      }\n      ctx.beginPath();\n      ctx.moveTo(camera.applyToX(i), camera.applyToY(camera.top));\n      ctx.lineTo(camera.applyToX(i), camera.applyToY(camera.bottom));\n      ctx.stroke();\n    }\n    for (var j = minY; j <= maxY; j += innerGridSize) {\n      if (j % (innerGridSize * 5) === 0) {\n        ctx.strokeStyle = \"rgba(255, 255, 255, 0.7)\";\n      } else {\n        ctx.strokeStyle = \"rgba(255, 255, 255, 0.3)\";\n      }\n      ctx.beginPath();\n      ctx.moveTo(camera.applyToX(camera.left), camera.applyToY(j));\n      ctx.lineTo(camera.applyToX(camera.right), camera.applyToY(j));\n      ctx.stroke();\n    }\n  };\n\n  Grid.prototype._drawPrecisionArea = function(ctx, camera) {\n    var mousePos = this.getMousePosSnappedToGrid(this.mouse.x, this.mouse.y);\n    var precisionAreaGameSize = this.precisionAreaSize * camera.zoomLevel;\n    var precisionGridSize = this.precisionGridSize * camera.zoomLevel;\n    var minX = Math.floor(mousePos.x - precisionAreaGameSize / 2);\n    var maxX = Math.ceil(mousePos.x + precisionAreaGameSize / 2);\n    var minY = Math.floor(mousePos.y - precisionAreaGameSize / 2);\n    var maxY = Math.ceil(mousePos.y + precisionAreaGameSize / 2);\n    ctx.strokeStyle = \"grey\";\n    for (var i = minX; i <= maxX; i += precisionGridSize) {\n      ctx.beginPath();\n      ctx.moveTo(i, minY);\n      ctx.lineTo(i, maxY);\n      ctx.stroke();\n    }\n    for (var j = minY; j <= maxY; j += precisionGridSize) {\n      ctx.beginPath();\n      ctx.moveTo(minX, j);\n      ctx.lineTo(maxX, j);\n      ctx.stroke();\n    }\n  };\n\n  Grid.prototype._drawCursor = function(ctx, camera) {\n    var mousePos = this.getMousePosSnappedToGrid(this.mouse.x, this.mouse.y);\n    var cursorSize = this.cursorSize;\n    ctx.strokeStyle = this.cursorColor;\n    ctx.lineWidth = 2;\n    ctx.beginPath();\n    ctx.moveTo(mousePos.x - cursorSize / 2, mousePos.y);\n    ctx.lineTo(mousePos.x + cursorSize / 2, mousePos.y);\n    ctx.moveTo(mousePos.x, mousePos.y - cursorSize / 2);\n    ctx.lineTo(mousePos.x, mousePos.y + cursorSize / 2);\n    ctx.stroke();\n    ctx.restore();\n  };\n\n  Grid.prototype._displayCoordinates = function(ctx, camera) {\n    var mousePos = this.getMousePosSnappedToGrid(this.mouse.x, this.mouse.y);\n    ctx.font = \"bold 14px Arial\";\n    ctx.fillStyle = \"#ccc\";\n    var mouseGamePos = camera.unapply(mousePos.x, mousePos.y);\n    ctx.fillText(\n      mouseGamePos.x + \", \" + mouseGamePos.y,\n      mousePos.x + 20,\n      mousePos.y - 20\n    );\n  };\n\n  Grid.prototype.draw = function(ctx, camera, options) {\n    var camera = this.camera;\n\n    // update mouse precision for performance\n    if (camera.zoomLevel <= 0.3) {\n      this.innerGridSize = 1000;\n    } else if (camera.zoomLevel < 0.5) {\n      this.innerGridSize = 100;\n    } else if (camera.zoomLevel < 3) {\n      this.innerGridSize = 50;\n    } else if (camera.zoomLevel < 5) {\n      this.innerGridSize = 10;\n    }\n    this.precisionAreaSize = this.innerGridSize;\n    this.precisionGridSize = this.precisionAreaSize / 10;\n\n    this.options.displayRulers && this._drawRulers(ctx, camera);\n    !this.options.isGame && this._drawInnerGrid(ctx, camera);\n    // this._drawPrecisionArea(ctx, camera);\n    !this.options.isGame && this._drawCursor(ctx, camera);\n    !this.options.isGame && this._displayCoordinates(ctx, camera);\n    !this.options.isGame &&\n      this.options.displayRulers &&\n      this._drawRulers(ctx, camera);\n  };\n\n  return Grid;\n})();\n\nmodule.exports = Grid;\n","module.exports = {\n  Keyboard: require(\"./keyboard/Keyboard\"),\n  Mouse: require(\"./mouse/Mouse\"),\n  Touch: require(\"./touch/touchManager\")\n};\n","function Mouse(app) {\n  this.app = app;\n  this.canvas = document.getElementById(\"canvas\");\n  // mouse config\n  this.naturalScrolling = true;\n\n  // mouse state\n  this.buttons = {\n    0: false,\n    1: false,\n    2: false\n  };\n  this.wheel = 0;\n  this.clickX = 0;\n  this.clickY = 0;\n  this.releaseX = 0;\n  this.releaseY = 0;\n  this.x;\n  this.y;\n  this.dx = 0;\n  this.dy = 0;\n  this.grabbed = null;\n  this.grabbedStartingX;\n  this.grabbedStartingY;\n\n  this.canvas.addEventListener(\"contextmenu\", function(e) {\n    e.preventDefault ? e.preventDefault() : (e.returnValue = false);\n  });\n\n  this.canvas.addEventListener(\n    \"mousedown\",\n    function(e) {\n      this.clickX = e.clientX + this.canvas.offsetLeft;\n      this.clickY = e.clientY + this.canvas.offsetTop;\n\n      this.buttons[e.button] = true;\n      switch (e.button) {\n        case 1:\n          // mouse wheel\n          this.canvas.style.cursor = \"move\";\n          this.grabbed = this.app.camera;\n          this.grabbedStartingX = this.grabbed.x;\n          this.grabbedStartingY = this.grabbed.y;\n          break;\n        default:\n          break;\n      }\n    }.bind(this)\n  );\n\n  this.canvas.addEventListener(\n    \"mouseup\",\n    function(e) {\n      this.releaseX = e.clientX + this.canvas.offsetLeft;\n      this.releaseY = e.clientY + this.canvas.offsetTop;\n      this.buttons[e.button] = false;\n      switch (e.button) {\n        case 1:\n          // mouse wheel\n          this.canvas.style.cursor = \"\";\n          this.grabbed = null;\n          break;\n        default:\n          break;\n      }\n    }.bind(this)\n  );\n\n  this.canvas.addEventListener(\n    \"mousemove\",\n    function(e) {\n      var camera = this.app.camera;\n      var scrollDirection = this.naturalScrolling ? 1 : -1;\n      this.x = e.clientX + this.canvas.offsetLeft;\n      this.y = e.clientY + this.canvas.offsetTop;\n\n      // move camera when mouse wheel is held down\n      if (this.buttons[1]) {\n        this.grabbed.x =\n          this.grabbedStartingX -\n          (scrollDirection * (this.x - this.clickX)) / camera.zoomLevel;\n        this.grabbed.y =\n          this.grabbedStartingY -\n          (scrollDirection * (this.y - this.clickY)) / camera.zoomLevel;\n      }\n    }.bind(this)\n  );\n\n  this.canvas.addEventListener(\n    \"wheel\",\n    function(e) {\n      var camera = this.app.camera;\n      var deltaY = e.deltaY;\n      var mouseGamePosSnappedToGrid = this.app.grid.getMouseGamePosSnappedToGrid(\n        this.x,\n        this.y\n      );\n\n      deltaY > 0\n        ? camera.zoomIn(\n            mouseGamePosSnappedToGrid.x,\n            mouseGamePosSnappedToGrid.y\n          )\n        : camera.zoomOut(\n            mouseGamePosSnappedToGrid.x,\n            mouseGamePosSnappedToGrid.y\n          );\n    }.bind(this)\n  );\n}\n\nMouse.prototype.on = function(el, type, callback) {\n  // console.log(\"ON\", el, type, callback);\n  el.addEventListener(type, callback, arguments[3]);\n};\n\nMouse.prototype.off = function(el, type, callback) {\n  // console.log(\"OFF\", el, type, callback);\n  el.removeEventListener(type, callback, arguments[3]);\n};\n\nmodule.exports = Mouse;\n","function MouseManager(app) {\n  this.app = app;\n  this.canvas = document.getElementById(\"canvas\");\n  // mouse config\n  this.naturalScrolling = true;\n\n  // mouse state\n  this.buttons = {\n    0: false,\n    1: false,\n    2: false\n  };\n  this.wheel = 0;\n  this.clickX = 0;\n  this.clickY = 0;\n  this.releaseX = 0;\n  this.releaseY = 0;\n  this.x;\n  this.y;\n  this.dx = 0;\n  this.dy = 0;\n  this.grabbed = null;\n  this.grabbedStartingX;\n  this.grabbedStartingY;\n\n  this.canvas.addEventListener(\"contextmenu\", function(e) {\n    e.preventDefault ? e.preventDefault() : (e.returnValue = false);\n  });\n\n  this.canvas.addEventListener(\n    \"mousedown\",\n    function(e) {\n      this.clickX = e.clientX + this.canvas.offsetLeft;\n      this.clickY = e.clientY + this.canvas.offsetTop;\n\n      this.buttons[e.button] = true;\n      switch (e.button) {\n        case 1:\n          // mouse wheel\n          this.canvas.style.cursor = \"move\";\n          this.grabbed = this.app.camera;\n          this.grabbedStartingX = this.grabbed.x;\n          this.grabbedStartingY = this.grabbed.y;\n          break;\n        default:\n          break;\n      }\n    }.bind(this)\n  );\n\n  this.canvas.addEventListener(\n    \"mouseup\",\n    function(e) {\n      this.releaseX = e.clientX + this.canvas.offsetLeft;\n      this.releaseY = e.clientY + this.canvas.offsetTop;\n      this.buttons[e.button] = false;\n      switch (e.button) {\n        case 1:\n          // mouse wheel\n          this.canvas.style.cursor = \"\";\n          this.grabbed = null;\n          break;\n        default:\n          break;\n      }\n    }.bind(this)\n  );\n\n  this.canvas.addEventListener(\n    \"mousemove\",\n    function(e) {\n      var camera = this.app.camera;\n      var scrollDirection = this.naturalScrolling ? 1 : -1;\n      this.x = e.clientX + this.canvas.offsetLeft;\n      this.y = e.clientY + this.canvas.offsetTop;\n\n      // move camera when mouse wheel is held down\n      if (this.buttons[1]) {\n        this.grabbed.x =\n          this.grabbedStartingX -\n          (scrollDirection * (this.x - this.clickX)) / camera.zoomLevel;\n        this.grabbed.y =\n          this.grabbedStartingY -\n          (scrollDirection * (this.y - this.clickY)) / camera.zoomLevel;\n      }\n    }.bind(this)\n  );\n\n  this.canvas.addEventListener(\n    \"wheel\",\n    function(e) {\n      var camera = this.app.camera;\n      var deltaY = e.deltaY;\n      var mouseGamePosSnappedToGrid = this.app.grid.getMouseGamePosSnappedToGrid(\n        this.x,\n        this.y\n      );\n\n      deltaY > 0\n        ? camera.zoomIn(\n            mouseGamePosSnappedToGrid.x,\n            mouseGamePosSnappedToGrid.y\n          )\n        : camera.zoomOut(\n            mouseGamePosSnappedToGrid.x,\n            mouseGamePosSnappedToGrid.y\n          );\n    }.bind(this)\n  );\n}\n\nMouseManager.prototype.on = function(el, type, callback) {\n  // console.log(\"ON\", el, type, callback);\n  el.addEventListener(type, callback, arguments[3]);\n};\n\nMouseManager.prototype.off = function(el, type, callback) {\n  // console.log(\"OFF\", el, type, callback);\n  el.removeEventListener(type, callback, arguments[3]);\n};\n\nmodule.exports = MouseManager;\n","var Vector = require(\"./geometry/vector\");\n\nvar Particle = (function() {\n  function Particle(props) {\n    Vector.call(this, props.x, props.y);\n\n    this.circle = props.circle;\n    this.size = props.size;\n    this.color = props.color;\n\n    this.v = new Vector(props.vx, props.vy);\n    this.createdAt = Date.now();\n    this.maxLife = props.maxLife;\n  }\n\n  Particle.prototype = Object.create(Vector.prototype);\n  Particle.prototype.constructor = Particle;\n\n  Particle.prototype.update = function() {\n    this.x += this.v.x * dt;\n    this.y += this.v.y * dt;\n  };\n\n  Particle.prototype.destroy = function() {\n    delete this.particles[this.id];\n  };\n\n  Particle.prototype.draw = function(ctx, camera) {\n    ctx.fillStyle = this.color;\n    ctx.beginPath();\n    if (this.circle) {\n      ctx.arc(\n        camera.applyToX(this.x + this.size / 2),\n        camera.applyToY(this.y + this.size / 2),\n        camera.applyToDistance(this.size / 2),\n        0,\n        2 * Math.PI\n      );\n    } else {\n      ctx.rect(\n        camera.applyToX(this.x),\n        camera.applyToY(this.y),\n        camera.applyToDistance(this.size),\n        camera.applyToDistance(this.size)\n      );\n    }\n    ctx.fill();\n  };\n\n  return Particle;\n})();\n\nmodule.exports = Particle;\n","var Segment = require(\"./geometry/segment\");\nvar Vector = require(\"./geometry/vector\");\nvar utils = require(\"../utils\");\n\nvar physics = {\n  collision: {\n    RectangleWithRectangle: function(r1, r2) {\n      return (\n        r1.left <= r2.right &&\n        r1.right >= r2.left &&\n        r1.top <= r2.bottom &&\n        r1.bottom >= r2.top\n      );\n    },\n    circleWithSegment: function(c, s) {\n      var C = new Vector(c.x, c.y);\n      var H = s.getPointOfIntersectionWithCircle(c);\n\n      if (H) {\n        return H;\n      }\n      return false;\n    },\n    lineSegmentCollision: function(A, B, O, P) {\n      var AB = Vector.subtract(B, A);\n      var AP = Vector.subtract(P, A);\n      var AO = Vector.subtract(O, A);\n      return Vector.determinant(AB, AP) * Vector.determinant(AB, AO) < 0;\n    },\n    segmentWithSegment: function(A, B, O, P) {\n      if (!this.lineSegmentCollision(A, B, O, P)) {\n        return Number.POSITIVE_INFINITY;\n      }\n      var AB = Vector.subtract(B, A);\n      var OP = Vector.subtract(P, O);\n      var numerator = -(A.x * OP.y - O.x * OP.y - OP.x * A.y + OP.x * O.y);\n      var denominator = Vector.determinant(AB, OP);\n      k = utils.toFixedPrecision(numerator / denominator, 2);\n\n      if (k < 0 || k > 1) {\n        return Number.POSITIVE_INFINITY;\n      } else {\n        return k;\n      }\n    },\n    segmentRectangle: function(A, B, box) {\n      var AB = Vector.subtract(B, A);\n      var points = [\n        new Vector(box.left, box.top),\n        new Vector(box.right, box.top),\n        new Vector(box.right, box.bottom),\n        new Vector(box.left, box.bottom)\n      ];\n      var rayFraction = Number.POSITIVE_INFINITY;\n      var sides = [[0, 1], [-1, 0], [0, -1], [1, 0]];\n      var side;\n\n      for (var i = 0; i < 4; i++) {\n        var edge = new Segment(points[i], points[(i + 1) % 4]);\n        var newRayFraction = this.segmentWithSegment(A, B, edge.A, edge.B);\n        if (newRayFraction < rayFraction) {\n          rayFraction = newRayFraction;\n          side = sides[i];\n        }\n      }\n\n      return {\n        t: rayFraction,\n        side: side\n      };\n    }\n  }\n};\n\nmodule.exports = physics;\n","var Tile = require(\"./tile\");\n\nfunction TileMap() {\n  this.rows = 100;\n  this.columns = 100;\n  this.tileSize = 40;\n\n  this.data = {\n    tiles: [\n      {\n        row: -20,\n        column: 0,\n        src: \"./assets/images/smoke2.png\"\n      },\n      {\n        row: -20,\n        column: 1,\n        src: \"./assets/images/smoke2.png\"\n      },\n      {\n        row: -20,\n        column: 2,\n        src: \"./assets/images/smoke2.png\"\n      },\n      {\n        row: -20,\n        column: 3,\n        src: \"./assets/images/smoke2.png\"\n      },\n      {\n        row: -20,\n        column: 3,\n        src: \"./assets/images/smoke2.png\"\n      },\n      {\n        row: -20,\n        column: 4,\n        src: \"./assets/images/smoke2.png\"\n      },\n      {\n        row: -21,\n        column: 4,\n        src: \"./assets/images/smoke2.png\"\n      },\n      {\n        row: -21,\n        column: 5,\n        src: \"./assets/images/smoke2.png\"\n      },\n      {\n        row: -21,\n        column: 6,\n        src: \"./assets/images/smoke1.png\"\n      },\n      {\n        row: -21,\n        column: 7,\n        src: \"./assets/images/smoke1.png\"\n      },\n      {\n        row: -21,\n        column: 8,\n        src: \"./assets/images/smoke1.png\"\n      },\n      {\n        row: -21,\n        column: 9,\n        src: \"./assets/images/smoke2.png\"\n      },\n      {\n        row: -21,\n        column: 10,\n        src: \"./assets/images/bootstrap-logo.png\"\n      },\n      {\n        row: -20,\n        column: 10,\n        src: \"./assets/images/bootstrap-logo.png\"\n      },\n      {\n        row: -19,\n        column: 10,\n        src: \"./assets/images/bootstrap-logo.png\"\n      },\n      {\n        row: -18,\n        column: 10,\n        src: \"./assets/images/smoke2.png\"\n      }\n    ]\n  };\n  this.tiles = [];\n  this.data.tiles.forEach(function(tileData) {\n    var x = this.tileSize * tileData.column;\n    var y = this.tileSize * tileData.row;\n    var tile = new Tile(x, y, this.tileSize, tileData.src);\n    this.tiles.push(tile);\n  }, this);\n}\n\nTileMap.prototype.draw = function(ctx, camera) {\n  this.tiles.forEach(function(tile) {\n    tile.draw(ctx, camera);\n  }, this);\n};\n\nmodule.exports = TileMap;\n"],"sourceRoot":""}